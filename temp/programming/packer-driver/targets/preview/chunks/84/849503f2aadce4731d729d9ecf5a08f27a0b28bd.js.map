{"version":3,"sources":["file:///E:/cocos/project/CrazyGame/assets/script/manager/CardManager.ts"],"names":["CardInfo","_decorator","Component","clientEvent","ccclass","property","CardManager","cardArry","chooseCards","instance","_instance","initCardArray","dispatchEvent","creatCardInfo","index","cardInfo","type","uid","Date","now","Math","random","push","updateChooseCard","isChoose","i","length","splice","updateCard","haveCardArr","info","j","haveCardInfo","maxCardCount"],"mappings":";;;mHAoEaA,Q;;;;;;;;;;;;;;;AApEJC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,W,iBAAAA,W;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;6BAGjBK,W,WADZF,OAAO,CAAC,aAAD,C,2BAAR,MACaE,WADb,SACiCJ,SADjC,CAC2C;AAAA;AAAA;AAAA,eAUhCK,QAVgC,GAUvB,EAVuB;AAWV;AAXU,eAYhCC,WAZgC,GAYpB,EAZoB;AAAA;;AAGpB,mBAARC,QAAQ,GAAG;AAClB,cAAI,CAAC,KAAKC,SAAV,EAAqB;AACjB,iBAAKA,SAAL,GAAiB,IAAIJ,WAAJ,EAAjB;AACH;;AACD,iBAAO,KAAKI,SAAZ;AACH;;AAIoB;AAEdC,QAAAA,aAAa,GAAG;AACnB,eAAKJ,QAAL,GAAgB,EAAhB,CADmB,CAEnB;AACA;AACA;AACA;AACA;AACA;;AACA;AAAA;AAAA,0CAAYK,aAAZ,CAA0B,cAA1B;AACH;;AAEDC,QAAAA,aAAa,CAACC,KAAD,EAAc;AACvB,cAAIC,QAAiB,GAAC,IAAIf,QAAJ,EAAtB;AACAe,UAAAA,QAAQ,CAACC,IAAT,GAAcF,KAAd;AACAC,UAAAA,QAAQ,CAACE,GAAT,GAAcC,IAAI,CAACC,GAAL,KAAW,EAAX,GAAcC,IAAI,CAACC,MAAL,KAAc,SAA1C,CAHuB,CAG8B;;AACrDf,UAAAA,WAAW,CAACG,QAAZ,CAAqBF,QAArB,CAA8Be,IAA9B,CAAmCP,QAAnC;AACA;AAAA;AAAA,0CAAYH,aAAZ,CAA0B,YAA1B;AACA,iBAAOG,QAAP;AACH;;AACMQ,QAAAA,gBAAgB,CAACR,QAAD,EAAmBS,QAAnB,EAAoC;AACvD,cAAGA,QAAH,EAAY;AACR,iBAAKhB,WAAL,CAAiBc,IAAjB,CAAsBP,QAAtB;AACH,WAFD,MAEK;AACD,iBAAI,IAAIU,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKjB,WAAL,CAAiBkB,MAA/B,EAAsCD,CAAC,EAAvC,EAA0C;AACtC,kBAAG,KAAKjB,WAAL,CAAiBiB,CAAjB,EAAoBR,GAApB,IAAyBF,QAAQ,CAACE,GAArC,EAAyC;AACrC,qBAAKT,WAAL,CAAiBmB,MAAjB,CAAwBF,CAAxB;AACA;AACH;AACJ;AACJ;AACJ;;AAEMG,QAAAA,UAAU,CAACrB,QAAD,EAAUsB,WAAV,EAAsB;AACnC,eAAI,IAAIJ,CAAC,GAAG,CAAZ,EAAcA,CAAC,GAAClB,QAAQ,CAACmB,MAAzB,EAAgCD,CAAC,EAAjC,EAAoC;AAChC,gBAAIK,IAAI,GAACvB,QAAQ,CAACkB,CAAD,CAAjB;;AACA,iBAAI,IAAIM,CAAC,GAAG,CAAZ,EAAcA,CAAC,GAACF,WAAW,CAACH,MAA5B,EAAmCK,CAAC,EAApC,EAAuC;AACnC,kBAAIC,YAAY,GAACH,WAAW,CAACE,CAAD,CAA5B;;AACA,kBAAGD,IAAI,CAACb,GAAL,IAAUe,YAAY,CAACf,GAA1B,EAA8B;AAC1BY,gBAAAA,WAAW,CAACF,MAAZ,CAAmBI,CAAnB,EAAqB,CAArB;AACA;AACH;AAEJ;AACJ;;AACD,eAAKvB,WAAL,GAAiB,EAAjB;AACA;AAAA;AAAA,0CAAYI,aAAZ,CAA0B,YAA1B;AACH;;AA5DsC,O,UAChCF,S,GAAyB,I,UAUlBuB,Y,GAAa,C;;0BAoDlBjC,Q,GAAN,MAAMA,QAAN,CAAc;AAAA;AAAA,eACjBgB,IADiB,GACJ,CADI;AACF;AADE,eAEjBC,GAFiB,GAEN,EAFM;AAAA,UAEH;;;AAFG,O","sourcesContent":["import { _decorator, Component, Node, TiledObjectGroup } from 'cc';\r\nimport { clientEvent } from '../utils/clientEvent';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CardManager')\r\nexport class CardManager extends Component {\r\n    static _instance: CardManager = null;\r\n\r\n    static get instance() {\r\n        if (!this._instance) {\r\n            this._instance = new CardManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    public cardArry=[];\r\n    public static maxCardCount=7;//最多卡牌\r\n    public chooseCards=[]//选中的卡牌\r\n\r\n    public initCardArray() {\r\n        this.cardArry = [];\r\n        // // 初始化卡牌\r\n        // for (let i = 0; i < 3; i++) {\r\n        //     let cardInfo:CardInfo=new CardInfo();\r\n        //     cardInfo.type=i;\r\n        //     this.cardArry.push(cardInfo);\r\n        // }\r\n        clientEvent.dispatchEvent(\"InitCardInfo\");\r\n    }\r\n\r\n    creatCardInfo(index:number){\r\n        let cardInfo:CardInfo=new CardInfo();\r\n        cardInfo.type=index;\r\n        cardInfo.uid=(Date.now()+\"\"+Math.random()*100000000);//唯一id\r\n        CardManager.instance.cardArry.push(cardInfo);\r\n        clientEvent.dispatchEvent(\"UpdateCard\");\r\n        return cardInfo;\r\n    }\r\n    public updateChooseCard(cardInfo:CardInfo,isChoose:boolean){\r\n        if(isChoose){\r\n            this.chooseCards.push(cardInfo);\r\n        }else{\r\n            for(let i=0;i<this.chooseCards.length;i++){\r\n                if(this.chooseCards[i].uid==cardInfo.uid){\r\n                    this.chooseCards.splice(i);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public updateCard(cardArry,haveCardArr){\r\n        for(let i = 0;i<cardArry.length;i++){\r\n            let info=cardArry[i];\r\n            for(let j = 0;j<haveCardArr.length;j++){\r\n                let haveCardInfo=haveCardArr[j];\r\n                if(info.uid==haveCardInfo.uid){\r\n                    haveCardArr.splice(j,1);\r\n                    break;\r\n                }\r\n\r\n            }\r\n        }\r\n        this.chooseCards=[];\r\n        clientEvent.dispatchEvent(\"UpdateCard\");\r\n    }\r\n\r\n}\r\nexport class CardInfo{\r\n    type: number=0;//什么兵种\r\n    uid:string='';//唯一id\r\n}\r\n\r\n"]}