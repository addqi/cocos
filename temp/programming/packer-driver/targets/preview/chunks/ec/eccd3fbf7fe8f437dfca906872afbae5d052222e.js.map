{"version":3,"sources":["file:///E:/cocos/project/CrazyGame/assets/script/manager/BattleManager.ts"],"names":["BattleInfoDate","_decorator","Component","clientEvent","CardManager","ccclass","property","BattleManager","_dicPanel","battleInfo","enemyBattleInfo","_gameManger","instance","_instance","initBattleInfo","gameManger","creatBattleInfo","creatEnemyBattleInfo","initCardArray","dispatchEvent","hp","attack","curreentHp","onDamege","damage","team"],"mappings":";;;gIAuDaA,c;;;;;;;;;;;;;;;;;;;;;;;AAvDJC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;+BAGjBM,a,WADZF,OAAO,CAAC,eAAD,C,2BAAR,MACaE,aADb,SACmCL,SADnC,CAC6C;AAAA;AAAA;AAAA,eAGjCM,SAHiC,GAGhB,EAHgB;AAKzC;AALyC,eAMlCC,UANkC,GAML,IAAIT,cAAJ,EANK;AAAA,eAOlCU,eAPkC,GAOA,IAAIV,cAAJ,EAPA;AAAA,eAQzCW,WARyC;AAAA;;AAStB,mBAARC,QAAQ,GAAG;AAClB,cAAI,CAAC,KAAKC,SAAV,EAAqB;AACjB,iBAAKA,SAAL,GAAiB,IAAIN,aAAJ,EAAjB;AACH;;AACD,iBAAO,KAAKM,SAAZ;AACH,SAdwC,CAezC;;;AACOC,QAAAA,cAAc,CAACC,UAAD,EAA0B;AAC3C,eAAKJ,WAAL,GAAmBI,UAAnB;AACA,eAAKC,eAAL;AACA,eAAKC,oBAAL;AACA;AAAA;AAAA,0CAAYL,QAAZ,CAAqBM,aAArB;AACA;AAAA;AAAA,0CAAYC,aAAZ,CAA0B,gBAA1B;AACH,SAtBwC,CAwBzC;;;AACOH,QAAAA,eAAe,GAAG;AACrB,eAAKP,UAAL,CAAgBW,EAAhB,GAAqB,GAArB;AACA,eAAKX,UAAL,CAAgBY,MAAhB,GAAyB,EAAzB;AACA,eAAKZ,UAAL,CAAgBa,UAAhB,GAA6B,KAAKb,UAAL,CAAgBW,EAA7C;AACH,SA7BwC,CA8BzC;;;AACOH,QAAAA,oBAAoB,GAAG;AAC1B,eAAKP,eAAL,CAAqBU,EAArB,GAA0B,GAA1B;AACA,eAAKV,eAAL,CAAqBW,MAArB,GAA8B,EAA9B;AACA,eAAKX,eAAL,CAAqBY,UAArB,GAAkC,KAAKZ,eAAL,CAAqBU,EAAvD;AACH;;AAEMG,QAAAA,QAAQ,CAACC,MAAD,EAAgBC,IAAhB,EAA6B;AACxC,cAAGA,IAAI,IAAI,CAAX,EAAa;AACT,iBAAKf,eAAL,CAAqBY,UAArB,IAAmCE,MAAnC;;AACA,gBAAG,KAAKd,eAAL,CAAqBY,UAArB,IAAmC,CAAtC,EAAwC;AACpC;AAAA;AAAA,8CAAYH,aAAZ,CAA0B,UAA1B;AACA,mBAAKT,eAAL,CAAqBY,UAArB,GAAkC,CAAlC;AACH;;AACD;AAAA;AAAA,4CAAYH,aAAZ,CAA0B,eAA1B;AACH;AACJ;;AA9CwC,O,UAClCN,S,GAA2B,I;;gCA+CzBb,c,GAAN,MAAMA,cAAN,CAAqB;AAAA;AAAA,eACxBoB,EADwB;AACb;AADa,eAExBC,MAFwB;AAET;AAFS,eAGxBC,UAHwB;AAAA,UAGL;;;AAHK,O","sourcesContent":["import { _decorator, Component, Node, TiledObjectGroup } from 'cc';\r\nimport { clientEvent } from '../utils/clientEvent';\r\nimport { CardManager } from './CardManager';\r\nimport { GameManager } from './GameManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BattleManager')\r\nexport class BattleManager extends Component {\r\n    static _instance: BattleManager = null;\r\n\r\n    private _dicPanel: any = {};\r\n\r\n    //初始化自己信息\r\n    public battleInfo: BattleInfoDate = new BattleInfoDate();\r\n    public enemyBattleInfo: BattleInfoDate = new BattleInfoDate();\r\n    _gameManger: GameManager;\r\n    static get instance() {\r\n        if (!this._instance) {\r\n            this._instance = new BattleManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n    //初始化战斗信息\r\n    public initBattleInfo(gameManger: GameManager) {\r\n        this._gameManger = gameManger;\r\n        this.creatBattleInfo();\r\n        this.creatEnemyBattleInfo();\r\n        CardManager.instance.initCardArray();\r\n        clientEvent.dispatchEvent(\"InitBattleInfo\");\r\n    }\r\n\r\n    //初始化玩家战斗信息\r\n    public creatBattleInfo() {\r\n        this.battleInfo.hp = 500;\r\n        this.battleInfo.attack = 10;\r\n        this.battleInfo.curreentHp = this.battleInfo.hp;\r\n    }\r\n    //初始化敌人战斗信息\r\n    public creatEnemyBattleInfo() {\r\n        this.enemyBattleInfo.hp = 500;\r\n        this.enemyBattleInfo.attack = 10;\r\n        this.enemyBattleInfo.curreentHp = this.enemyBattleInfo.hp;\r\n    }\r\n\r\n    public onDamege(damage: number,team:number) {\r\n        if(team == 1){\r\n            this.enemyBattleInfo.curreentHp -= damage;\r\n            if(this.enemyBattleInfo.curreentHp <= 0){\r\n                clientEvent.dispatchEvent(\"GameOver\");\r\n                this.enemyBattleInfo.curreentHp = 0;\r\n            }\r\n            clientEvent.dispatchEvent(\"UpdateEnemyHp\");\r\n        }\r\n    }\r\n}\r\nexport class BattleInfoDate {\r\n    hp: number;//当前血量\r\n    attack: number;//当前攻击力\r\n    curreentHp: number;//当前血量\r\n\r\n}\r\n\r\n\r\n"]}