{"version":3,"sources":["file:///E:/cocos/project/CrazyGame/assets/res/scripts/manager/BattleManager.ts"],"names":["BattleInfoData","_decorator","clientEvent","CardManager","ccclass","property","BattleManager","dicPanel","chooseCards","_gameManager","isGameOver","battleInfo","enemyBattleInfo","instance","_instance","initBattleInfo","gameManger","createrBattleInfo","createrEnemyBattleInfo","initCardArray","dispatchEvent","hp","attack","curreentHp","onDamage","damage","console","log","gameManager"],"mappings":";;;qHAmEcA,c;;;;;;;;;;;;;;;;;;;;;;;AAnELC,MAAAA,U,OAAAA,U;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;+BAGjBK,a,WADZF,OAAO,CAAC,eAAD,C,2BAAR,MACaE,aADb,CAC2B;AAAA;AAAA,eACfC,QADe,GACJ,EADI;AAAA,eAGhBC,WAHgB,GAGF,EAHE;AAAA,eAIfC,YAJe;AAAA,eAKhBC,UALgB,GAKK,KALL;AAAA,eAuBhBC,UAvBgB,GAuBY,IAvBZ;AAAA,eAwBhBC,eAxBgB,GAwBiB,IAxBjB;AAAA;;AAMJ,mBAARC,QAAQ,GAAE;AACjB,cAAG,KAAKC,SAAR,EACA;AACI,mBAAO,KAAKA,SAAZ;AACH;;AACD,eAAKA,SAAL,GAAiB,IAAIR,aAAJ,EAAjB;AACA,iBAAO,KAAKQ,SAAZ;AACH;;AACMC,QAAAA,cAAc,CAACC,UAAD,EAAwB;AACzC,eAAKN,UAAL,GAAkB,KAAlB;AACA,eAAKD,YAAL,GAAoBO,UAApB;AACA,eAAKC,iBAAL;AACA,eAAKC,sBAAL;AACA;AAAA;AAAA,0CAAYL,QAAZ,CAAqBM,aAArB;AACA;AAAA;AAAA,0CAAYC,aAAZ,CAA0B,gBAA1B;AACH;;AAID;AACOH,QAAAA,iBAAiB,GAAE;AACvB,eAAKN,UAAL,GAAkB,IAAIX,cAAJ,EAAlB;AACA,eAAKW,UAAL,CAAgBU,EAAhB,GAAqB,GAArB;AACC,eAAKV,UAAL,CAAgBW,MAAhB,GAAyB,EAAzB;AACA,eAAKX,UAAL,CAAgBY,UAAhB,GAA6B,KAAKZ,UAAL,CAAgBU,EAA7C;AACH;;AAEMH,QAAAA,sBAAsB,GAAE;AAC3B,eAAKN,eAAL,GAAsB,IAAIZ,cAAJ,EAAtB;AACA,eAAKY,eAAL,CAAqBS,EAArB,GAA0B,IAA1B;AACA,eAAKT,eAAL,CAAqBU,MAArB,GAA8B,EAA9B;AACA,eAAKV,eAAL,CAAqBW,UAArB,GAAkC,KAAKX,eAAL,CAAqBS,EAAvD;AACH;;AAEMG,QAAAA,QAAQ,CAACC,MAAD,EACf;AACI,eAAKb,eAAL,CAAqBW,UAArB,IAAmCE,MAAnC;;AACA,cAAG,KAAKb,eAAL,CAAqBW,UAArB,IAAiC,CAApC,EACA;AACI,iBAAKX,eAAL,CAAqBW,UAArB,GAAkC,CAAlC;AACAG,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,iBAAKjB,UAAL,GAAkB,IAAlB;AAEH;;AACD;AAAA;AAAA,0CAAYU,aAAZ,CAA0B,eAA1B;AACH;;AAGqB,YAAXQ,WAAW,GAAE;AACpB,iBAAO,KAAKnB,YAAZ;AACH;;AAxDsB,O,UAEhBK,S;;gCA0DGd,c,GAAP,MAAOA,cAAP,CAAsB;AAAA;AAAA,eACzBqB,EADyB,GACb,CADa;AACX;AADW,eAEzBC,MAFyB,GAEV,CAFU;AAER;AAFQ,eAGzBC,UAHyB,GAGL,CAHK;AAAA,UAGH;;;AAHG,O","sourcesContent":["import { _decorator, find, instantiate, Prefab, resources } from \"cc\";\r\nimport { clientEvent } from \"../utils/clientEvent\";\r\nimport { CardManager } from \"./CardManager\";\r\nimport { GameManager } from \"./GameManager\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"BattleManager\")\r\nexport class BattleManager {\r\n    private dicPanel = {};\r\n    static _instance:BattleManager;\r\n    public chooseCards = [];\r\n    private _gameManager:GameManager;\r\n    public isGameOver:boolean = false;\r\n    static get instance(){\r\n        if(this._instance)\r\n        {\r\n            return this._instance;\r\n        }\r\n        this._instance = new BattleManager();\r\n        return this._instance;\r\n    }\r\n    public initBattleInfo(gameManger:GameManager){\r\n        this.isGameOver = false;\r\n        this._gameManager = gameManger;\r\n        this.createrBattleInfo();\r\n        this.createrEnemyBattleInfo();\r\n        CardManager.instance.initCardArray();\r\n        clientEvent.dispatchEvent(\"InitBattleInfo\")\r\n    }\r\n\r\n    public battleInfo:BattleInfoData = null;\r\n    public enemyBattleInfo:BattleInfoData = null;\r\n    //初始化自己信息\r\n    public createrBattleInfo(){\r\n       this.battleInfo = new BattleInfoData();\r\n       this.battleInfo.hp = 500;\r\n        this.battleInfo.attack = 10;\r\n        this.battleInfo.curreentHp = this.battleInfo.hp;\r\n    }\r\n\r\n    public createrEnemyBattleInfo(){\r\n        this.enemyBattleInfo= new BattleInfoData();\r\n        this.enemyBattleInfo.hp = 1000;\r\n        this.enemyBattleInfo.attack = 10;\r\n        this.enemyBattleInfo.curreentHp = this.enemyBattleInfo.hp;\r\n    }\r\n\r\n    public onDamage(damage)\r\n    {\r\n        this.enemyBattleInfo.curreentHp -= damage;\r\n        if(this.enemyBattleInfo.curreentHp<=0)\r\n        {\r\n            this.enemyBattleInfo.curreentHp = 0;\r\n            console.log(\"游戏结束\")\r\n            this.isGameOver = true;\r\n\r\n        }\r\n        clientEvent.dispatchEvent(\"UpdateEnemyHp\")\r\n    }\r\n\r\n\r\n    public get gameManager(){\r\n        return this._gameManager;\r\n    }\r\n\r\n}\r\n\r\nexport class  BattleInfoData {\r\n    hp:number = 0;//血量\r\n    attack:number =0;//攻击\r\n    curreentHp:number = 0;//当前血量\r\n    \r\n}\r\n"]}