{"version":3,"sources":["file:///E:/cocos/project/CrazyGame/assets/script/manager/Uimanager.ts"],"names":["_decorator","find","instantiate","Prefab","resources","ccclass","property","Uimanager","_dicPanel","instance","_instance","showPanel","name","func","load","err","prefab","console","error","node","panel","getComponent","init","parent","addChild","hidePanel","log","destroy","start","update","deltaTime"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;;;;;;;;;OAC3D;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;2BAGjBO,S,WADZF,OAAO,CAAC,WAAD,C,2BAAR,MACaE,SADb,CACuB;AAAA;AAAA,eAGXC,SAHW,GAGI,EAHJ;AAAA;;AAIA,mBAARC,QAAQ,GAAG;AAClB,cAAI,CAAC,KAAKC,SAAV,EAAqB;AACjB,iBAAKA,SAAL,GAAiB,IAAIH,SAAJ,EAAjB;AACH;;AACD,iBAAO,KAAKG,SAAZ;AACH;;AAEMC,QAAAA,SAAS,CAACC,IAAD,EAAcC,IAAd,EAAqB;AACjCT,UAAAA,SAAS,CAACU,IAAV,CAAe,eAAeF,IAA9B,EAAoCT,MAApC,EAA4C,CAACY,GAAD,EAAMC,MAAN,KAAiB;AACzD,gBAAID,GAAJ,EAAS;AACLE,cAAAA,OAAO,CAACC,KAAR,CAAc,OAAd,EAAuBH,GAAvB;AACA;AACH;;AACD,gBAAIC,MAAJ,EAAY;AACR,kBAAIG,IAAI,GAAGjB,WAAW,CAACc,MAAD,CAAtB;AACA,kBAAII,KAAU,GAAGD,IAAI,CAACE,YAAL,CAAkBT,IAAlB,CAAjB;;AACA,kBAAIQ,KAAJ,EAAW;AACPA,gBAAAA,KAAK,CAACE,IAAN;AACH;;AACD,kBAAIC,MAAM,GAAGtB,IAAI,CAAC,QAAD,CAAjB;;AACA,kBAAIsB,MAAJ,EAAY;AACRA,gBAAAA,MAAM,CAACC,QAAP,CAAgBL,IAAhB;AACAA,gBAAAA,IAAI,CAACI,MAAL,GAAcA,MAAd;AACH;;AACD,kBAAG,CAAC,KAAKf,SAAL,CAAeI,IAAf,CAAJ,EAAyB;AACrB,qBAAKJ,SAAL,CAAeI,IAAf,IAAuBQ,KAAvB;AACH;AACJ;;AACD,gBAAGP,IAAH,EAAQ;AACJA,cAAAA,IAAI;AACP;AACJ,WAvBD;AAwBH;;AAEMY,QAAAA,SAAS,CAACb,IAAD,EAAe;AAC3B,cAAIQ,KAAK,GAAE,KAAKZ,SAAL,CAAeI,IAAf,CAAX;;AACA,cAAIQ,KAAJ,EAAW;AACPH,YAAAA,OAAO,CAACS,GAAR,CAAY,MAAZ,EAAmBN,KAAnB;AACAA,YAAAA,KAAK,CAACD,IAAN,CAAWI,MAAX,GAAkB,IAAlB;AACAH,YAAAA,KAAK,CAACD,IAAN,CAAWQ,OAAX,GAHO,CAIP;AACA;;AACA,mBAAO,KAAKnB,SAAL,CAAeI,IAAf,CAAP;AACH;AACJ;;AACDgB,QAAAA,KAAK,GAAG,CAEP;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAvDkB,O,UACZpB,S,GAAuB,I","sourcesContent":["import { _decorator, Component, find, instantiate, Node, Prefab, resources } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Uimanager')\r\nexport class Uimanager {\r\n    static _instance: Uimanager = null;\r\n\r\n    private _dicPanel: any={};\r\n    static get instance() {\r\n        if (!this._instance) {\r\n            this._instance = new Uimanager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    public showPanel(name: string,func?) {\r\n        resources.load(\"prefab/UI/\" + name, Prefab, (err, prefab) => {\r\n            if (err) {\r\n                console.error(\"加载错误:\", err);\r\n                return;\r\n            }\r\n            if (prefab) {\r\n                let node = instantiate(prefab);\r\n                let panel: any = node.getComponent(name);\r\n                if (panel) {\r\n                    panel.init();\r\n                }\r\n                let parent = find(\"Canvas\");\r\n                if (parent) {\r\n                    parent.addChild(node);\r\n                    node.parent = parent;\r\n                }\r\n                if(!this._dicPanel[name]){\r\n                    this._dicPanel[name] = panel;\r\n                }\r\n            }\r\n            if(func){\r\n                func();\r\n            }\r\n        });\r\n    }\r\n\r\n    public hidePanel(name: string) {\r\n        let panel =this._dicPanel[name];\r\n        if (panel) {\r\n            console.log(\"成功销毁\",panel);\r\n            panel.node.parent=null;\r\n            panel.node.destroy();\r\n            // panel.parent=null;\r\n            // panel.destroy();\r\n            delete this._dicPanel[name];\r\n        }\r\n    }\r\n    start() {\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}