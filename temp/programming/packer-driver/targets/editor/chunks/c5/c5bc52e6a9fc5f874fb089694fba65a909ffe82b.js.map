{"version":3,"sources":["file:///E:/cocos/project/CrazyGame/assets/res/scripts/Panel/Card.ts"],"names":["_decorator","Component","Node","ProgressBar","Sprite","tween","Tween","v3","CardManager","ccclass","property","Card","index","cardInfo","isChoose","init","icon","node","active","ndProgress","ndChoose","setIndex","updatteData","cardData","progressBar","progress","updateChoose","initData","creatCard","creatCardTime","stopAllByTarget","to","call","instance","creatCardInfo","cardArray","start","onCardClick","updateChooseCard","position","x","z"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, ProgressBar, Sprite, tween, Tween, v3 } from 'cc';\r\nimport { CardManager } from '../manager/CardManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Card')\r\nexport class Card extends Component {\r\n    @property(Sprite)\r\n    icon:Sprite = null!;\r\n\r\n    @property(ProgressBar)\r\n    progressBar:ProgressBar = null!;\r\n    @property(Node)\r\n    ndProgress:Node = null!;\r\n\r\n    @property(Node)\r\n    ndChoose:Node = null!;\r\n\r\n    private index:number = -1;\r\n\r\n    public cardInfo = null;\r\n    private isChoose = false;\r\n    init(){\r\n        this.index = -1;\r\n        this.icon.node.active = false;\r\n        this.ndProgress.active = false;\r\n        this.cardInfo = null;\r\n        this.ndChoose.active = false;\r\n        this.isChoose = false;\r\n    }\r\n    \r\n    public setIndex(index)\r\n    {\r\n        this.index = index;\r\n    }\r\n\r\n    updatteData(cardData)\r\n    {\r\n        this.cardInfo = cardData;\r\n        this.progressBar.progress = 0;\r\n        if(cardData)\r\n        {\r\n            this.icon.node.active = true;\r\n            this.ndProgress.active =false;\r\n        }else\r\n        {\r\n            this.icon.node.active = false;\r\n            this.ndProgress.active =false;\r\n        }\r\n        this.isChoose =false;\r\n        this.updateChoose();\r\n       \r\n    }\r\n\r\n    initData(index,cardData)\r\n    {\r\n        if(this.index== index)\r\n        {\r\n            this.cardInfo = cardData;\r\n            this.icon.node.active = true;\r\n            this.ndProgress.active =false;\r\n        }\r\n    }\r\n\r\n    creatCard(index){\r\n        if(!this.cardInfo && this.index== index)\r\n        {\r\n            this.ndProgress.active =true;\r\n            this.progressBar.progress = 0;\r\n            let creatCardTime = 3;\r\n            Tween.stopAllByTarget(this.progressBar);\r\n            tween(this.progressBar).to(creatCardTime,{progress:1}).call(()=>{\r\n                this.progressBar.progress = 0;\r\n                CardManager.instance.creatCardInfo(CardManager.instance.cardArray)\r\n            }).start();\r\n        }\r\n    }\r\n\r\n    public onCardClick(){\r\n        if(this.cardInfo==null)\r\n        {\r\n            return;\r\n        }\r\n        this.isChoose =!this.isChoose;\r\n       \r\n        CardManager.instance.updateChooseCard(this.cardInfo,this.isChoose);\r\n        this.updateChoose();\r\n    }\r\n\r\n    private updateChoose(){\r\n        if(this.isChoose)\r\n        {\r\n            this.ndChoose.active = true;\r\n            this.node.position =v3(this.node.position.x,20,this.node.position.z);\r\n        }else{\r\n            this.ndChoose.active = false;\r\n            this.node.position =v3(this.node.position.x,0,this.node.position.z);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}