{"version":3,"sources":["file:///E:/cocos/project/CrazyGame/assets/res/scripts/manager/GameManager.ts"],"names":["_decorator","CameraComponent","Component","instantiate","Node","Prefab","resources","clientEvent","BattleManager","FigthManager","ccclass","property","GameManager","onEnable","on","onCreatorPalyer","onDisable","off","load","err","prefab","node","dfNode","addChild","myNode","instance","initBattleInfo","init_game","mainCamer","mainCamera","soliderParent","soliderNode","getWallNode","team"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAoBC,MAAAA,e,OAAAA,e;AAAiBC,MAAAA,S,OAAAA,S;AAAmCC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;;AACnGC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;6BAGjBY,W,WADZF,OAAO,CAAC,aAAD,C,UAEHC,QAAQ,CAACP,IAAD,C,UAERO,QAAQ,CAACP,IAAD,C,UAGRO,QAAQ,CAACV,eAAD,C,UAGRU,QAAQ,CAACP,IAAD,C,2BAVb,MACaQ,WADb,SACiCV,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAY7BW,QAAAA,QAAQ,GAAS;AACvB;AAAA;AAAA,0CAAYC,EAAZ,CAAe,eAAf,EAA+B,KAAKC,eAApC,EAAoD,IAApD;AACH;;AAESC,QAAAA,SAAS,GAAS;AACxB;AAAA;AAAA,0CAAYC,GAAZ,CAAgB,eAAhB,EAAgC,KAAKF,eAArC,EAAqD,IAArD;AACH;;AACMA,QAAAA,eAAe,GAAE;AACnBT,UAAAA,SAAS,CAACY,IAAV,CAAe,sBAAf,EAAsCb,MAAtC,EAA6C,CAACc,GAAD,EAAKC,MAAL,KAAc;AACxD,gBAAGA,MAAH,EACA;AACI,kBAAIC,IAAI,GAAGlB,WAAW,CAACiB,MAAD,CAAtB;AACA,mBAAKE,MAAL,CAAYC,QAAZ,CAAqBF,IAArB;AACH;AACJ,WANA;AAQDf,UAAAA,SAAS,CAACY,IAAV,CAAe,sBAAf,EAAsCb,MAAtC,EAA6C,CAACc,GAAD,EAAKC,MAAL,KAAc;AACvD,gBAAGA,MAAH,EACA;AACI,kBAAIC,IAAI,GAAGlB,WAAW,CAACiB,MAAD,CAAtB;AACA,mBAAKI,MAAL,CAAYD,QAAZ,CAAqBF,IAArB;AACH;AACJ,WAND;AAOA;AAAA;AAAA,8CAAcI,QAAd,CAAuBC,cAAvB,CAAsC,IAAtC;AACA,eAAKC,SAAL;AACH;;AAEOA,QAAAA,SAAS,GAAE;AACf;AAAA;AAAA,4CAAaF,QAAb,CAAsBG,SAAtB,GAAkC,KAAKC,UAAvC;AACA;AAAA;AAAA,4CAAaJ,QAAb,CAAsBK,aAAtB,GAAqC,KAAKC,WAA1C;AACH;;AAGMC,QAAAA,WAAW,CAACC,IAAD,EAClB;AACI,cAAGA,IAAI,IAAI,CAAX,EACA;AACI,mBAAO,KAAKX,MAAZ;AACH,WAHD,MAIA;AACI,mBAAQ,KAAKE,MAAb;AACH;AACJ;;AAtDsC,O;;;;;iBAEzB,I;;;;;;;iBAEA,I;;;;;;;iBAGc,I;;;;;;;iBAGT,I","sourcesContent":["import { _decorator, Camera, CameraComponent, Component, EventMouse, EventTouch, instantiate, Node, Prefab, resources, Touch } from 'cc';\r\nimport { clientEvent } from '../utils/clientEvent';\r\nimport { BattleManager } from './BattleManager';\r\nimport { FigthManager } from './FigthManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameManager')\r\nexport class GameManager extends Component {\r\n    @property(Node)\r\n    dfNode:Node = null!;\r\n    @property(Node)\r\n    myNode:Node = null!;\r\n\r\n    @property(CameraComponent)\r\n    mainCamera:CameraComponent= null!;\r\n\r\n    @property(Node)\r\n    soliderNode:Node = null!;\r\n \r\n    protected onEnable(): void {\r\n        clientEvent.on(\"CreaterPlayer\",this.onCreatorPalyer,this)\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        clientEvent.off(\"CreaterPlayer\",this.onCreatorPalyer,this)\r\n    }\r\n    public onCreatorPalyer(){\r\n         resources.load(\"prefab/player/player\",Prefab,(err,prefab)=>{\r\n            if(prefab)\r\n            {\r\n                let node = instantiate(prefab);\r\n                this.dfNode.addChild(node);\r\n            }\r\n        })\r\n\r\n        resources.load(\"prefab/player/player\",Prefab,(err,prefab)=>{\r\n            if(prefab)\r\n            {\r\n                let node = instantiate(prefab);\r\n                this.myNode.addChild(node);\r\n            }\r\n        })\r\n        BattleManager.instance.initBattleInfo(this);\r\n        this.init_game();\r\n    }\r\n\r\n    private init_game(){\r\n        FigthManager.instance.mainCamer = this.mainCamera;\r\n        FigthManager.instance.soliderParent =this.soliderNode;\r\n    }\r\n\r\n    \r\n    public getWallNode(team)\r\n    {\r\n        if(team == 1)\r\n        {\r\n            return this.dfNode;\r\n        }else\r\n        {\r\n            return  this.myNode;\r\n        }\r\n    }\r\n\r\n    \r\n   \r\n}\r\n\r\n\r\n"]}