{"version":3,"sources":["file:///E:/cocos/project/CrazyGame/assets/res/scripts/manager/UiManager.ts"],"names":["_decorator","find","instantiate","Prefab","resources","ccclass","property","UiManager","dicPanel","instance","_instance","showPanel","name","func","load","err","prefab","console","log","node","panel","getComponent","init","parent","addChild","hidePanel","destroy"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;;;;;;;;;OAC1C;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;2BAGjBO,S,WADZF,OAAO,CAAC,WAAD,C,2BAAR,MACaE,SADb,CACuB;AAAA;AAAA,eACXC,QADW,GACA,EADA;AAAA;;AAGA,mBAARC,QAAQ,GAAE;AACjB,cAAG,KAAKC,SAAR,EACA;AACI,mBAAO,KAAKA,SAAZ;AACH;;AACD,eAAKA,SAAL,GAAiB,IAAIH,SAAJ,EAAjB;AACA,iBAAO,KAAKG,SAAZ;AACH;;AAIMC,QAAAA,SAAS,CAACC,IAAD,EAAMC,IAAN,EAChB;AACIT,UAAAA,SAAS,CAACU,IAAV,CAAe,eAAaF,IAA5B,EAAiCT,MAAjC,EAAwC,CAACY,GAAD,EAAKC,MAAL,KAAc;AAClD,gBAAGD,GAAH,EACA;AACIE,cAAAA,OAAO,CAACC,GAAR,CAAY,SAAOH,GAAnB;AACH;;AACD,gBAAGC,MAAH,EACA;AACI,kBAAIG,IAAI,GAAGjB,WAAW,CAACc,MAAD,CAAtB;AAEA,kBAAII,KAAS,GAAGD,IAAI,CAACE,YAAL,CAAkBT,IAAlB,CAAhB;;AACA,kBAAGQ,KAAH,EACA;AACIA,gBAAAA,KAAK,CAACE,IAAN;AACH;;AACD,kBAAIC,MAAM,GAAGtB,IAAI,CAAC,QAAD,CAAjB;;AACA,kBAAGsB,MAAH,EACA;AACIA,gBAAAA,MAAM,CAACC,QAAP,CAAgBL,IAAhB;AACH;;AACD,kBAAG,CAAC,KAAKX,QAAL,CAAcI,IAAd,CAAJ,EACA;AACI,qBAAKJ,QAAL,CAAcI,IAAd,IAAsBQ,KAAtB;AACH;AAEJ;;AACD,gBAAGP,IAAH,EACA;AACIA,cAAAA,IAAI;AACP;AACJ,WA7BD;AA8BH;;AAEMY,QAAAA,SAAS,CAACb,IAAD,EAChB;AACI,cAAIQ,KAAK,GAAG,KAAKZ,QAAL,CAAcI,IAAd,CAAZ;;AACA,cAAGQ,KAAH,EACA;AACIA,YAAAA,KAAK,CAACG,MAAN,GAAe,IAAf;AACAH,YAAAA,KAAK,CAACM,OAAN;AACA,iBAAKlB,QAAL,CAAcI,IAAd,IAAsB,IAAtB;AACH;AACJ;;AAzDkB,O,UAEZF,S","sourcesContent":["import { _decorator, find, instantiate, Prefab, resources } from \"cc\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"UiManager\")\r\nexport class UiManager {\r\n    private dicPanel = {};\r\n    static _instance:UiManager;\r\n    static get instance(){\r\n        if(this._instance)\r\n        {\r\n            return this._instance;\r\n        }\r\n        this._instance = new UiManager();\r\n        return this._instance;\r\n    }\r\n\r\n\r\n\r\n    public showPanel(name,func?)\r\n    {\r\n        resources.load(\"prefab/ui/\"+name,Prefab,(err,prefab)=>{\r\n            if(err)\r\n            {\r\n                console.log(\"加载错误\"+err);\r\n            }\r\n            if(prefab)\r\n            {\r\n                let node = instantiate(prefab);\r\n        \r\n                let panel:any = node.getComponent(name);\r\n                if(panel)\r\n                {\r\n                    panel.init()\r\n                }\r\n                let parent = find(\"Canvas\")\r\n                if(parent)\r\n                {\r\n                    parent.addChild(node);\r\n                }\r\n                if(!this.dicPanel[name])\r\n                {\r\n                    this.dicPanel[name] = panel;\r\n                }\r\n                \r\n            }\r\n            if(func)\r\n            {\r\n                func();\r\n            }\r\n        })\r\n    }\r\n\r\n    public hidePanel(name)\r\n    {\r\n        let panel = this.dicPanel[name];\r\n        if(panel)\r\n        {\r\n            panel.parent = null;\r\n            panel.destroy();\r\n            this.dicPanel[name] = null;\r\n        }\r\n    }\r\n}"]}