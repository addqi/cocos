{"version":3,"sources":["file:///E:/cocos/project/CrazyGame/assets/script/manager/GameManager.ts"],"names":["_decorator","Camera","Component","instantiate","Node","Prefab","resources","clientEvent","BattleManager","FightManager","ccclass","property","GameManager","onEnable","on","onCreatorPalyer","onDisable","off","load","err","prefab","console","error","node","dfNode","addChild","myNode","instance","initBattleInfo","camera","soliderParent","soliderNode","mainCamera","getWallNode","team"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;;AAChEC,MAAAA,W,iBAAAA,W;;AAEAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;6BAGjBY,W,WADZF,OAAO,CAAC,aAAD,C,UAEHC,QAAQ,CAACP,IAAD,C,UAERO,QAAQ,CAACP,IAAD,C,UAGRO,QAAQ,CAACV,MAAD,C,UAERU,QAAQ,CAACP,IAAD,C,2BATb,MACaQ,WADb,SACiCV,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAKvC;AALuC;;AAAA;AAAA;;AAW7BW,QAAAA,QAAQ,GAAS;AACvB;AAAA;AAAA,0CAAYC,EAAZ,CAAe,eAAf,EAA+B,KAAKC,eAApC,EAAoD,IAApD;AAEH;;AACSC,QAAAA,SAAS,GAAS;AACxB;AAAA;AAAA,0CAAYC,GAAZ,CAAgB,eAAhB,EAAgC,KAAKF,eAArC,EAAqD,IAArD;AACH;;AACMA,QAAAA,eAAe,GAAE;AACpBT,UAAAA,SAAS,CAACY,IAAV,CAAe,sBAAf,EAAwCb,MAAxC,EAAgD,CAACc,GAAD,EAAMC,MAAN,KAAiB;AAC7D,gBAAID,GAAJ,EAAS;AACLE,cAAAA,OAAO,CAACC,KAAR,CAAc,OAAd,EAAuBH,GAAvB;AACA;AACH;;AACD,gBAAIC,MAAJ,EAAY;AACR,kBAAIG,IAAI,GAAGpB,WAAW,CAACiB,MAAD,CAAtB;AAEA,mBAAKI,MAAL,CAAYC,QAAZ,CAAqBF,IAArB;AACH;AACJ,WAVD;AAWAjB,UAAAA,SAAS,CAACY,IAAV,CAAe,sBAAf,EAAwCb,MAAxC,EAAgD,CAACc,GAAD,EAAMC,MAAN,KAAiB;AAC7D,gBAAID,GAAJ,EAAS;AACLE,cAAAA,OAAO,CAACC,KAAR,CAAc,OAAd,EAAuBH,GAAvB;AACA;AACH;;AACD,gBAAIC,MAAJ,EAAY;AACR,kBAAIG,IAAI,GAAGpB,WAAW,CAACiB,MAAD,CAAtB;AAEA,mBAAKM,MAAL,CAAYD,QAAZ,CAAqBF,IAArB;AACH;AACJ,WAVD;AAWA;AAAA;AAAA,8CAAcI,QAAd,CAAuBC,cAAvB,CAAsC,IAAtC;AACA;AAAA;AAAA,4CAAaD,QAAb,CAAsBE,MAAtB,GAA6B,KAAKA,MAAlC;AACA;AAAA;AAAA,4CAAaF,QAAb,CAAsBG,aAAtB,GAAoC,KAAKC,WAAzC;AACH;;AACoB,YAAVC,UAAU,GAAG;AACpB,iBAAO,KAAKH,MAAZ;AACH;;AACMI,QAAAA,WAAW,CAACC,IAAD,EAAa;AAC3B,cAAGA,IAAI,IAAI,CAAX,EAAa;AACT,mBAAO,KAAKV,MAAZ;AACH,WAFD,MAEM,IAAIU,IAAI,IAAI,CAAZ,EAAc;AAChB,mBAAQ,KAAKR,MAAb;AACH;AACJ;;AAtDsC,O;;;;;iBAExB,I;;;;;;;iBAEA,I;;;;;;;iBAGE,I;;;;;;;iBAEG,I","sourcesContent":["import { _decorator, Camera, Component, find, instantiate, Node, Prefab, resources } from 'cc';\r\nimport { clientEvent } from '../utils/clientEvent';\r\nimport { BattleInfoData } from '../../res/scripts/manager/BattleManager';\r\nimport { BattleManager } from './BattleManager';\r\nimport { FightManager } from './FightManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameManager')\r\nexport class GameManager extends Component {\r\n    @property(Node)\r\n    dfNode: Node = null;\r\n    @property(Node)\r\n    myNode: Node = null;\r\n    //生成人物模型\r\n    @property(Camera)\r\n    camera: Camera = null!;\r\n    @property(Node)\r\n    soliderNode: Node = null;\r\n\r\n    protected onEnable(): void {\r\n        clientEvent.on(\"CreatorPlayer\",this.onCreatorPalyer,this);\r\n\r\n    }\r\n    protected onDisable(): void {\r\n        clientEvent.off(\"CreatorPlayer\",this.onCreatorPalyer,this)\r\n    }    \r\n    public onCreatorPalyer(){\r\n        resources.load(\"prefab/player/player\" , Prefab, (err, prefab) => {\r\n            if (err) {\r\n                console.error(\"加载错误:\", err);\r\n                return;\r\n            }\r\n            if (prefab) {\r\n                let node = instantiate(prefab);\r\n                \r\n                this.dfNode.addChild(node);\r\n            }\r\n        });\r\n        resources.load(\"prefab/player/player\" , Prefab, (err, prefab) => {\r\n            if (err) {\r\n                console.error(\"加载错误:\", err);\r\n                return;\r\n            }\r\n            if (prefab) {\r\n                let node = instantiate(prefab);\r\n                \r\n                this.myNode.addChild(node);\r\n            }\r\n        });\r\n        BattleManager.instance.initBattleInfo(this);\r\n        FightManager.instance.camera=this.camera;\r\n        FightManager.instance.soliderParent=this.soliderNode;\r\n    }\r\n    public get mainCamera() {\r\n        return this.camera;\r\n    }\r\n    public getWallNode(team:number){\r\n        if(team == 1){\r\n            return this.dfNode;\r\n        }else if (team == 2){\r\n            return  this.myNode;\r\n        }\r\n    }\r\n}\r\n\r\n"]}